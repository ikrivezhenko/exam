{% extends 'base.html' %}

{% block title %}–ü—Ä–æ—Ñ–∏–ª—å {{ profile.username }}{% endblock %}

{% block content %}
<div style="background: white; padding: 20px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
    <h2>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {{ profile.username }}</h2>
    <p>
        <strong>Email:</strong> {{ profile.email|default:"–ù–µ —É–∫–∞–∑–∞–Ω" }}<br>
        <strong>–ò–º—è:</strong> {{ profile.first_name }} {{ profile.last_name }}
    </p>
    {% if user == profile %}
        <div style="margin-bottom: 20px; padding: 10px; background: #f9f9f9; border-radius: 4px;">
            <a href="{% url 'books:profile_edit' %}">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a> | 
            <a href="{% url 'password_change' %}">üîí –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</a>
        </div>
    {% endif %}
    <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
    <h3>–û–±—ä—è–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
    {% if page_obj %}
        {% for post in page_obj %}
        <div class="post-card">
            <div style="display: flex; gap: 20px;">
                {% if post.image %}
                    <div style="flex-shrink: 0;">
                        <img src="{{ post.image.url }}" alt="{{ post.title }}" style="width: 120px; height: auto; border-radius: 4px;">
                    </div>
                {% endif %}
                <div style="flex-grow: 1;">
                    <h3 style="margin-top: 0;"><a href="{% url 'books:post_detail' post.id %}">{{ post.title }}</a></h3>
                    <p style="margin: 5px 0;"><strong>–¶–µ–Ω–∞:</strong> {{ post.price }} ‚ÇΩ</p>
                    <p style="margin: 5px 0;">üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤: {{ post.comments.count }}</p>
                    {% if not post.is_published %}
                        <p style="color: red; font-weight: bold;">üö´ –°–Ω—è—Ç–æ —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</p>
                    {% elif post.pub_date > now %}
                        <p style="color: orange; font-weight: bold;">‚è≥ –û—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è ({{ post.pub_date|date:"d.m.Y H:i" }})</p>
                    {% else %}
                         <p style="color: green; font-size: 0.9em;">‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ</p>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
        {% include "includes/paginator.html" %}
    {% else %}
        <p>–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–∫–∞ –Ω–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π.</p>
    {% endif %}
</div>
{% endblock %}
