{% extends "base.html" %}

{% block content %}
<div class="admin-container">
    <h2>Управление датами экзаменов</h2>

    <h3>Создать новую дату экзамена</h3>
    <form method="POST">
        {{ form.hidden_tag() }}
        <div class="form-group">
            {{ form.date.label }}
            {{ form.date(class="form-control") }}
        </div>
        <div class="form-group">
            {{ form.program_id.label }}
            {{ form.program_id(class="form-control") }}
        </div>
        <div class="form-group">
            {{ form.submit(class="btn") }}
        </div>
    </form>

    <h3>Список экзаменационных дат</h3>
    <table>
        <thead>
            <tr>
                <th>Дата</th>
                <th>Программа</th>
                <th>Комиссия</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for exam_date in exam_dates %}
            <tr>
                <td>{{ exam_date.date.strftime('%d.%m.%Y') }}</td>
                <td>{{ exam_date.program.code }} {{ exam_date.program.name }}</td>
                <td>
                    <ul>
                        {% for member in exam_date.commission %}
                        <li>{{ member.user.full_name }} ({{ member.role }})</li>
                        {% endfor %}
                    </ul>
                </td>
                <td>
                    <a href="{{ url_for('routes.assign_commission', exam_date_id=exam_date.id) }}" class="btn">Редактировать комиссию</a>
                    <a href="{{ url_for('routes.assign_applicants', exam_date_id=exam_date.id) }}" class="btn">Назначить абитуриентов</a>
                    <a href="{{ url_for('routes.view_vedomost', exam_date_id=exam_date.id) }}" class="btn">Ведомость</a>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="4">Нет созданных экзаменационных дат</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}